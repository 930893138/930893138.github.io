<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <script type="text/javascript" src="/js/dytitle.js"></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ou.wf0913.info","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Elasticsearch为什么要用? 如果使用数据库查询存在问题   不能分词   性能问题   倒排索引：将文档进行分词，关键词和id的对应关系">
<meta property="og:type" content="article">
<meta property="og:title" content="ES安装教程">
<meta property="og:url" content="https://ou.wf0913.info/archives/1f642eed.html">
<meta property="og:site_name" content="淡年华">
<meta property="og:description" content="Elasticsearch为什么要用? 如果使用数据库查询存在问题   不能分词   性能问题   倒排索引：将文档进行分词，关键词和id的对应关系">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195020.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195024.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195034.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195044.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195058.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195109.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195117.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195127.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195139.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195147.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195203.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195210.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195225.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195315.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195321.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195328.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195336.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195355.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195402.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195414.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195422.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195430.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195437.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195444.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195455.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195501.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195508.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195514.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195521.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195534.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195539.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195546.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195556.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195603.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195610.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195615.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195623.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195631.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195638.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195646.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195652.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195659.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195710.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195721.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195727.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195738.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195745.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195753.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195759.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195804.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195812.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195822.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195829.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195840.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195849.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195857.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195905.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195912.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195920.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195926.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195937.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195945.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195950.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195957.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200005.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200012.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200023.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200054.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200125.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200132.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200143.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200150.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200158.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200208.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200227.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200256.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200303.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200311.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200318.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200351.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200408.png">
<meta property="article:published_time" content="2021-08-09T12:36:10.551Z">
<meta property="article:modified_time" content="2021-08-09T12:41:54.826Z">
<meta property="article:author" content="淡年华">
<meta property="article:tag" content="java">
<meta property="article:tag" content="框架">
<meta property="article:tag" content="搜索引擎">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195020.png">

<link rel="canonical" href="https://ou.wf0913.info/archives/1f642eed.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>ES安装教程 | 淡年华</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">淡年华</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-友链">

    <a href="/links/" rel="section"><i class="fa fa-street-view fa-fw"></i>友链</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ou.wf0913.info/archives/1f642eed.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/930893138/images@master/20210510215933.jpg">
      <meta itemprop="name" content="淡年华">
      <meta itemprop="description" content="欢迎来到淡年华">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="淡年华">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ES安装教程
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-08-09 20:36:10 / 修改时间：20:41:54" itemprop="dateCreated datePublished" datetime="2021-08-09T20:36:10+08:00">2021-08-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">安装教程</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/archives/1f642eed.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/archives/1f642eed.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Elasticsearch"><a href="#Elasticsearch" class="headerlink" title="Elasticsearch"></a>Elasticsearch</h2><p>为什么要用?</p>
<p>如果使用数据库查询存在问题</p>
<ol>
<li><p> 不能分词</p>
</li>
<li><p> 性能问题</p>
</li>
</ol>
<p>倒排索引：将文档进行分词，关键词和id的对应关系</p>
<span id="more"></span>
<h3 id="1-环境搭建"><a href="#1-环境搭建" class="headerlink" title="1.环境搭建"></a>1.环境搭建</h3><ol>
<li> 安装elasticsearch</li>
</ol>
<blockquote>
<p>1.1上传安装包到linux</p>
<p>1.2 解压安装包</p>
<p>解压后的目录结构如下图</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195020.png" alt="image-20210809195011744"></p>
<p>1.3进入到config文件夹中修改配置文件</p>
<p>vim elasticsearch.yml</p>
<p>在配置文件最后添加下如下内容</p>
<p>cluster.name: my-application</p>
<p>node.name: node-1</p>
<p>network.host: 0.0.0.0</p>
<p>http.port: 9200</p>
<p>cluster.initial_master_nodes: [&quot;node-1&quot;]</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195024.png" alt="image-20210809195022511"></p>
<p>1.4修改jvm.options</p>
<p>vim jvm.options</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195034.png" alt="image-20210809195033339"></p>
<p>1.5进入bin目录启动elasticsearch</p>
<p>执行命令:</p>
<p>./elasticsearch</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195044.png" alt="image-20210809195043325"></p>
</blockquote>
<p>出错，提示root用户不能启动elasticsearch</p>
<p>1.6创建账户：useradd yjf</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195058.png" alt="image-20210809195056559"></p>
<p>1.7设置密码：passwd yjf</p>
<blockquote>
<p>密码设置为yjf（会提示密码少于8个字符 不理他 继续设置yjf）</p>
</blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195109.png" alt="image-20210809195107937"></p>
<p>1.8设置elasticsearch-7.6.2文件夹的所属用户与用户组 以及权限(加R表示递归设置)</p>
<p>chown -R yjf:yjf /usr/local/elasticsearch-7.6.2</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195117.png" alt="image-20210809195116619"></p>
<p>1.9新创建的yjf用户最大可创建文件数太小,最大虚拟内存太小,切换到root用户,编辑下列配置文件,添加类似如下内容</p>
<p>切换到root用户</p>
<p>su root</p>
<p>#1. ===最大可创建文件数太小=======</p>
<p>vim /etc/security/limits.conf</p>
<p># 在文件末尾中增加下面内容</p>
<p>yjf soft nofile 65536</p>
<p>yjf hard nofile 65536</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195127.png" alt="image-20210809195126774"></p>
<p>#2. =====</p>
<p>vim /etc/security/limits.d/20-nproc.conf</p>
<p># 在文件末尾中增加下面内容</p>
<p>yjf soft nofile 65536</p>
<p>yjf hard nofile 65536</p>
<p>* hard nproc 4096</p>
<p># 注：* 代表Linux所有用户名称</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195139.png" alt="image-20210809195137798"></p>
<p>#3. ===最大虚拟内存太小=======</p>
<p>vim /etc/sysctl.conf</p>
<p>vm.max_map_count=655360</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195147.png" alt="image-20210809195146349"></p>
<p># 重新加载，输入下面命令：</p>
<p>sysctl -p</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195203.png" alt="image-20210809195202746"></p>
<p>2.0进入到bin目录（使用yjf用户重启es）</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195210.png" alt="image-20210809195209654"></p>
<p>如果需要后台启动 添加参数-d即可</p>
<p>2.1安装kibana</p>
<p>2.1.1把kibana上传到linux</p>
<p>2.1.2 解压kibana</p>
<p>2.1.3 设置kibana的用户与用户组</p>
<blockquote>
<p>chown yjf:yjf -R /usr/local/kibana</p>
</blockquote>
<p>2.1.3 修改配置文件</p>
<p>汉化设置：</p>
<blockquote>
<p>config/kibana.yml 里面修改i18n.locale: “zh_CN”</p>
<p>远程访问设置：</p>
<p>在配置文件最后添加</p>
<p>server.host: &quot;0.0.0.0&quot; 即可；</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195225.png" alt="image-20210809195224241">2.基本概念</p>
</blockquote>
<p>1. 概念</p>
<hr>
<p>  概念                                说明</p>
<hr>
<p>  索引（index)                        类似数据库的概念</p>
<p>  文档（document）                    类似数据库的一条记录</p>
<p>  字段（field）                       类似数据库中的字段</p>
<p>  映射（mapping）                     类似数据库的表结构（定义了字段的类型，字段使用的分词器）</p>
<h2 id="类型（type）-类似数据库中的表（7版本中默认的类型为-doc）"><a href="#类型（type）-类似数据库中的表（7版本中默认的类型为-doc）" class="headerlink" title="  类型（type）                        类似数据库中的表（7版本中默认的类型为_doc）"></a>  类型（type）                        类似数据库中的表（7版本中默认的类型为_doc）</h2><ol start="2">
<li> restful</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- --&gt;</span><br></pre></td></tr></table></figure>
<ol>
<li><p> 定义接口的一种规范</p>
</li>
<li><p> 基于http</p>
</li>
<li><p> 使用json进行数据交互</p>
</li>
<li><p> 每个uri表示一个资源</p>
</li>
<li><p> 客户端使用get/post/put/delete的方式来对服务器的资源进行操作</p>
</li>
</ol>
<blockquote>
<p>Get表示获取资源</p>
<p>Post表示创建（或者更新）资源</p>
<p>Put 表示更新资源</p>
<p>Delete表示删除资源</p>
</blockquote>
<h3 id="3-索引操作"><a href="#3-索引操作" class="headerlink" title="3.索引操作"></a>3.索引操作</h3><blockquote>
<p>Elasticsearch采用Rest风格API，因此其API就是一次http请求，你可以用任何工具发起http请求</p>
<p>添加索引:put <a href="http://ip:端口/">http://ip:端口/</a>索引名称</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195315.png" alt="image-20210809195314408"></p>
<p>查询索引:get <a href="http://ip:端口/">http://ip:端口/</a>索引名称</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195321.png" alt="image-20210809195320883"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195328.png" alt="image-20210809195327681"></p>
<p>删除索引:delete <a href="http://ip:端口/">http://ip:端口/</a>索引名称</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195336.png" alt="image-20210809195335253"></p>
<p>创建索引的请求格式：</p>
</blockquote>
<ul>
<li><p>  请求方式：PUT</p>
</li>
<li><p>  请求路径：/索引库名</p>
</li>
<li><p>  请求参数：json格式：</p>
</li>
</ul>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195355.png" alt="image-20210809195353725"></p>
<p>settings：索引库的设置</p>
<p>number_of_shards：分片数量</p>
<p>number_of_replicas：副本数量</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195402.png" alt="image-20210809195401389"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195414.png" alt="image-20210809195413551"></p>
<p>查看索引：</p>
<p>语法：</p>
<p>Get请求可以帮我们查看索引信息，格式：</p>
<p>GET /索引库名</p>
<p>查不到的情况：</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195422.png" alt="image-20210809195421565"></p>
<p>查询出来的情况：</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195430.png" alt="image-20210809195429504"></p>
<p>删除索引：</p>
<p>语法：</p>
<p>DELETE /索引库名</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195437.png" alt="image-20210809195436425"></p>
<p>再次查看索引</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195444.png" alt="image-20210809195443371"></p>
<h3 id="4-映射"><a href="#4-映射" class="headerlink" title="4.映射"></a>4.映射</h3><p>概念：</p>
<p>索引有了，接下来肯定是添加数据。但是，在添加数据之前必须定义映射。</p>
<p>映射是定义文档的过程，文档包含哪些字段，这些字段是否保存，是否索引，是否分词等</p>
<p>注意：在创建索引的时候，如果没有指定映射，映射默认是空</p>
<p>或者可以这样查看映射</p>
<p>因为映射涉及到字段的类型所以先介绍一下字段的类型</p>
<p>简单类型</p>
<p>字符串</p>
<p>keyword:不会分词，支持聚合</p>
<p>text:会分词，不支持聚合</p>
<p>分词：中华牙膏==》中华，牙膏</p>
<p>聚合：类似数据库中的sum avg</p>
<p>数值</p>
<p>布尔</p>
<p>日期</p>
<p>范围类型</p>
<p>integer_range, float_range, long_range, double_range, date_range</p>
<p>复杂类型</p>
<p>数组</p>
<p>对象</p>
<p>映射相关操作</p>
<blockquote>
<p>添加映射</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195455.png" alt="image-20210809195454099"></p>
<p>或者</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195501.png" alt="image-20210809195500353"></p>
<p>查询映射</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195508.png" alt="image-20210809195507929"></p>
<p>添加字段</p>
<p>直接添加即可</p>
</blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195514.png" alt="image-20210809195513752"></p>
<h3 id="5-文档"><a href="#5-文档" class="headerlink" title="5.文档"></a>5.文档</h3><blockquote>
<p>添加文档，不指定id</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195521.png" alt="image-20210809195520633"></p>
<p>添加文档，指定id</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195534.png" alt="image-20210809195533352"></p>
<p>查询所有文档</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195539.png" alt="image-20210809195538793"></p>
<p>删除文档</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195546.png" alt="image-20210809195545405"></p>
</blockquote>
<h3 id="使用Java操作ES"><a href="#使用Java操作ES" class="headerlink" title="使用Java操作ES"></a>使用Java操作ES</h3><blockquote>
<p>6.0准备工作</p>
<p>导入依赖</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195556.png" alt="image-20210809195555738"></p>
<p>编写配置文件</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195603.png" alt="image-20210809195602933"></p>
<p>编写配置类</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195610.png" alt="image-20210809195609662"></p>
<p>编写实体类</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195615.png" alt="image-20210809195614756"></p>
</blockquote>
<ol>
<li> 操作索引</li>
</ol>
<blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195623.png" alt="image-20210809195622818"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195631.png" alt="image-20210809195630756"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195638.png" alt="image-20210809195637458"></p>
</blockquote>
<ol start="2">
<li> 操作文档</li>
</ol>
<blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195646.png" alt="image-20210809195645783"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195652.png" alt="image-20210809195651915"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195659.png" alt="image-20210809195657949"></p>
</blockquote>
<h3 id="IK分词器"><a href="#IK分词器" class="headerlink" title="IK分词器"></a>IK分词器</h3><h4 id="7-1-安装分词器"><a href="#7-1-安装分词器" class="headerlink" title="7.1 安装分词器"></a>7.1 安装分词器</h4><p>安装方式：</p>
<ol>
<li> zip包解压到elasticsearch安装目录/plugin/ik下</li>
</ol>
<blockquote>
<p>解压的时候 使用unzip命令进行解压</p>
<p>所以需要先安装unzip命令</p>
<p>yum install -y unzip zip</p>
</blockquote>
<p>安装好之后解压（执行如下命令）</p>
<p>注意：解压的目录为elasticsearch安装目录/plugin/ik</p>
<p>特别注意：ik目录为自己创建的目录（名字随意，但是必须解到这层目录）</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195710.png" alt="image-20210809195709480"></p>
<ol start="2">
<li><p>重启es</p>
<ol>
<li> 不指定分词器的时候，使用默认分词器，对中文分词不友好，会按一个字一个字进行分词</li>
</ol>
</li>
</ol>
<blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195721.png" alt="image-20210809195720708"></p>
<p>分词结果</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195727.png" alt="image-20210809195726978"></p>
</blockquote>
<ol start="2">
<li> 使用ik分词器</li>
</ol>
<blockquote>
<p>Ik分词器有两种模式</p>
<p>ik_max_word：细粒度的分词</p>
<p>ik_smart：粗粒度的分词</p>
</blockquote>
<p>例如</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195738.png" alt="image-20210809195737011"></p>
<p>分词结果</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195745.png" alt="image-20210809195744819"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195753.png" alt="image-20210809195752900"></p>
<p>分词结果：</p>
<blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195759.png" alt="image-20210809195758361"></p>
</blockquote>
<h4 id="7-2-使用ik分词器查询文档"><a href="#7-2-使用ik分词器查询文档" class="headerlink" title="7.2 使用ik分词器查询文档"></a>7.2 使用ik分词器查询文档</h4><p>7.2.1使用默认分词的查询的案例</p>
<p>创建索引、添加映射</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195804.png" alt="image-20210809195803924"></p>
<p>添加文档数据</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195812.png" alt="image-20210809195811567"></p>
<p>查询当前user3索引库中所有的文档数据</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195822.png" alt="image-20210809195819975"></p>
<p>查询结果</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195829.png" alt="image-20210809195829142"></p>
<p>使用term进行查询</p>
<p>term查询不会分析查询条件，只有当查询条件与结果完全匹配的时，才匹配出搜索结果</p>
<p>使用match进行查询</p>
<p>match查询会分析查询条件，先将查询条件进行分词，然后查询匹配的结果，把所有匹配的结果求并集</p>
<p>案例使用term查询,条件为：中华人民共和国</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195840.png" alt="image-20210809195840104"></p>
<p>查询结果如下：（因为映射没设置分词器，所以文档中的name会使用默认分词器，把name按一个字一个字的进行分词。而这里使用的是term查询，该查询不会把查询条件进行分词，所以查询不到匹配记录）</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195849.png" alt="image-20210809195848819"></p>
<blockquote>
<p>案例使用match查询,条件为：中华人民共和国</p>
<p>查询结果如下：（因为映射没设置分词器，所以文档中的name会使用默认分词器，把name按一个字一个字的进行分词。而这里使用match查询，该查询会把查询条件进行分词，使用的也是默认分词器进行分词）</p>
</blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195857.png" alt="image-20210809195856245"></p>
<p>7.2.2使用ik_max_word查询的案例（term查询）</p>
<p>删除刚才的user3索引</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195905.png" alt="image-20210809195904730"></p>
<p>重新创建索引与映射，并且设置分词器</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195912.png" alt="image-20210809195911525"></p>
<p>查询创建好的索引</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195920.png" alt="image-20210809195919918"></p>
<p>结果如下</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195926.png" alt="image-20210809195925733"></p>
<p>添加文档数据</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195937.png" alt="image-20210809195936196"></p>
<p>查询所有文档数据</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195945.png" alt="image-20210809195944178"></p>
<p>查询结果如下：</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195950.png" alt="image-20210809195950118"></p>
<p>使用term查询，查询条件为：中华人民共和国（该查询条件不会进行分词）</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809195957.png" alt="image-20210809195956881"></p>
<p>查询结果如下：</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200005.png" alt="image-20210809200004941"></p>
<p>使用match查询，查询条件为：中华人民共和国（该查询条件会进行分词）</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200012.png" alt="image-20210809200011530"></p>
<p>查询结果如下：</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200023.png" alt="image-20210809200022860"></p>
<h3 id="批量操作"><a href="#批量操作" class="headerlink" title="批量操作"></a>批量操作</h3><blockquote>
<p>批量操作：一次发送多条请求来操作ES，使用bulk进行批量操作，通过一次请求，把所有文档的增删改查操作全部做完，减少网络的传输</p>
<p>语法：</p>
<p>POST /_bulk</p>
<p>{operationName:{data1}}</p>
<p>{“data2”}</p>
<p>operationName表示要操作的名称：</p>
<p>新增：create</p>
<p>删除：delete</p>
<p>修改：update</p>
<p>data1:表示要操作的索引库名称以及操作的文档的id</p>
<p>data2:表示新增或者修改时的数据</p>
<p>案例：</p>
<p>#删除111</p>
<p>#新增222</p>
<p>#新增333</p>
<p>#新增444</p>
<p>#修改444为==666</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200054.png" alt="image-20210809200053141"></p>
<p>执行结果：</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200125.png" alt="image-20210809200124481"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200132.png" alt="image-20210809200131663"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200143.png" alt="image-20210809200141964">}</p>
<p>使用Java代码进行批量操作</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200150.png" alt="image-20210809200149754"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200158.png" alt="image-20210809200157442"></p>
</blockquote>
<ol start="9">
<li><h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><ol>
<li><h4 id="查询所有-match-all查询"><a href="#查询所有-match-all查询" class="headerlink" title="查询所有(match_all查询)"></a>查询所有(match_all查询)</h4></li>
</ol>
</li>
</ol>
<blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200208.png" alt="image-20210809200207515"></p>
</blockquote>
<h4 id="term查询"><a href="#term查询" class="headerlink" title="term查询"></a>term查询</h4><p>查询条件不会进行分词</p>
<p>一般用于查询keyword的字段更合适</p>
<blockquote>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200227.png" alt="image-20210809200227028"></p>
</blockquote>
<h4 id="9-3match查询"><a href="#9-3match查询" class="headerlink" title="9.3match查询"></a>9.3match查询</h4><p>查询条件会进行分词</p>
<p>默认情况下把查询的结果求并集</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200256.png" alt="image-20210809200254928"></p>
<p>设置求交集的情况</p>
<p>or表示并集,为默认值，and表示求交集</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200303.png" alt="image-20210809200303192"></p>
<h4 id="9-4模糊查询"><a href="#9-4模糊查询" class="headerlink" title="9.4模糊查询"></a>9.4模糊查询</h4><p>1.wildcard查询:会对查询条件进行分词，使用?作为通配符（任意单个字符）</p>
<p>和*(0-N个字符)</p>
<p>注意：在查询条件最左边使用通配符 效率会很低 慎用</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200311.png" alt="image-20210809200310964"></p>
<p>2.prefix查询:前缀查询</p>
<p>最好用在keyword上</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200318.png" alt="image-20210809200318198"></p>
<h4 id="9-5范围与排序查询"><a href="#9-5范围与排序查询" class="headerlink" title="9.5范围与排序查询"></a>9.5范围与排序查询</h4><p>range查找指定字段在指定范围内</p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200351.png" alt="image-20210809200350700"></p>
<p><img data-src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210809200408.png" alt="image-20210809200408049"></p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>淡年华
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://ou.wf0913.info/archives/1f642eed.html" title="ES安装教程">https://ou.wf0913.info/archives/1f642eed.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/java/" rel="tag"><i class="fa fa-tag"></i> java</a>
              <a href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag"><i class="fa fa-tag"></i> 框架</a>
              <a href="/tags/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/" rel="tag"><i class="fa fa-tag"></i> 搜索引擎</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/archives/501327ed.html" rel="prev" title="ES整合springboot的增删改查">
      <i class="fa fa-chevron-left"></i> ES整合springboot的增删改查
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Elasticsearch"><span class="nav-number">1.</span> <span class="nav-text">Elasticsearch</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="nav-number">1.1.</span> <span class="nav-text">1.环境搭建</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%EF%BC%88type%EF%BC%89-%E7%B1%BB%E4%BC%BC%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E8%A1%A8%EF%BC%887%E7%89%88%E6%9C%AC%E4%B8%AD%E9%BB%98%E8%AE%A4%E7%9A%84%E7%B1%BB%E5%9E%8B%E4%B8%BA-doc%EF%BC%89"><span class="nav-number">2.</span> <span class="nav-text">  类型（type）                        类似数据库中的表（7版本中默认的类型为_doc）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%B4%A2%E5%BC%95%E6%93%8D%E4%BD%9C"><span class="nav-number">2.1.</span> <span class="nav-text">3.索引操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%98%A0%E5%B0%84"><span class="nav-number">2.2.</span> <span class="nav-text">4.映射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E6%96%87%E6%A1%A3"><span class="nav-number">2.3.</span> <span class="nav-text">5.文档</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8Java%E6%93%8D%E4%BD%9CES"><span class="nav-number">2.4.</span> <span class="nav-text">使用Java操作ES</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IK%E5%88%86%E8%AF%8D%E5%99%A8"><span class="nav-number">2.5.</span> <span class="nav-text">IK分词器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-%E5%AE%89%E8%A3%85%E5%88%86%E8%AF%8D%E5%99%A8"><span class="nav-number">2.5.1.</span> <span class="nav-text">7.1 安装分词器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-%E4%BD%BF%E7%94%A8ik%E5%88%86%E8%AF%8D%E5%99%A8%E6%9F%A5%E8%AF%A2%E6%96%87%E6%A1%A3"><span class="nav-number">2.5.2.</span> <span class="nav-text">7.2 使用ik分词器查询文档</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C"><span class="nav-number">2.6.</span> <span class="nav-text">批量操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.7.</span> <span class="nav-text">查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89-match-all%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.7.1.</span> <span class="nav-text">查询所有(match_all查询)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#term%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.7.2.</span> <span class="nav-text">term查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-3match%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.7.3.</span> <span class="nav-text">9.3match查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-4%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.7.4.</span> <span class="nav-text">9.4模糊查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-5%E8%8C%83%E5%9B%B4%E4%B8%8E%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="nav-number">2.7.5.</span> <span class="nav-text">9.5范围与排序查询</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="淡年华"
      src="https://cdn.jsdelivr.net/gh/930893138/images@master/20210510215933.jpg">
  <p class="site-author-name" itemprop="name">淡年华</p>
  <div class="site-description" itemprop="description">欢迎来到淡年华</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">7</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">淡年华</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">27k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">24 分钟</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js', () => {

    let friends = [];
    let master = '9bf8fbe552d99001ac18ca58f6f6b64e';
    let tagMeta = '博主,小伙伴,访客'.split(',')

    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });

    $.ajax({
      async:false,
      url:'/links/linklist.json',
      success(response){
        for(let i=0;i<response.length;i++){
          friends[i]=response[i].email;
        }
      }
    })

    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'rB6jgeiMY7AWHFkmQ0sdrDGl-gzGzoHsz',
      appKey     : 'zBUE58nfOGYirsIDPns35CFB',
      placeholder: "Just go go",
      avatar     : 'retro',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : '',
      master: master,
      friends: friends,
      tagMeta: tagMeta
    });
  }, window.Valine);
});
</script>





</body>
</html>
